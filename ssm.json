{
            "InstanceIds": ["__INSTANCE_ID__"],
            "DocumentName": "AWS-RunShellScript",
            "Parameters": {
              "commands": [
                "bash -lc 'echo "__ENV_B64__" | base64 -d | sudo tee /etc/environment > /dev/null'",
                "bash -lc 'echo "DB_URL=jdbc:postgresql://__RDS_HOST__/portfolio?useSSL=false\&serverTimezone=Asia/Seoul\&allowPublicKeyRetrieval=true" | sudo tee -a /etc/environment > /dev/null'",
                "bash -lc 'echo "DB_PASSWORD=__RDS_PASSWORD__" | sudo tee -a /etc/environment > /dev/null'",
                "docker stop portfolio-app || true",
                "docker rm portfolio-app || true",
                "aws ecr get-login-password --region ap-northeast-2 | docker login --username AWS --password-stdin __ECR_REGISTRY__",
                "docker run -d --name portfolio-app -p 8080:8080 -e JAVA_OPTS=-Xmx256m --env-file /etc/environment -v /opt/ploggo/images:/opt/ploggo/images -v /opt/ploggo/badge-icons:/opt/ploggo/badge-icons __IMAGE_URI__",
                "docker image prune -f"
              ]
            }
          }
